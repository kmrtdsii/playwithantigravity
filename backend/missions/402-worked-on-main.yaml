id: "402-worked-on-main"
title: "Oops, I Committed to Main!"
description: "You just realized you made 3 commits directly on main instead of a feature branch. Move them to a new branch without losing any work."
difficulty:
  level: "intermediate"
  stars: 2
skill: "reset"

setup:
  - "git init"
  - "git config user.name 'User'"
  - "git config user.email 'user@example.com'"
  - "echo 'Original main' > README.md"
  - "git add README.md"
  - "git commit -m 'Initial commit on main'"
  - "echo 'Feature work 1' > feature.js"
  - "git add feature.js"
  - "git commit -m 'Add feature module'"
  - "echo 'Feature work 2' >> feature.js"
  - "git add feature.js"
  - "git commit -m 'Extend feature'"
  - "echo 'Feature work 3' >> feature.js"
  - "git add feature.js"
  - "git commit -m 'Complete feature'"

# Scenario: 4 commits on main (1 original + 3 accidental feature commits)
# Goal: Create feature branch with 3 commits, reset main to original

validation:
  checks:
    - type: "branch_exists"
      name: "feature/task-A"
      description: "Feature branch created"
    - type: "current_branch"
      name: "main"
      description: "On main branch"
    - type: "head_commit_message"
      message_pattern: "Initial commit on main"
      description: "Main is reset to original commit"

hints:
  - "First, create a new branch at the current position: `git branch feature/task-A`"
  - "Then reset main back 3 commits: `git reset --hard HEAD~3`"
  - "The commits are NOT lost - they're still on the feature branch!"

scoring:
  time_bonus: true
  hint_penalty: 10
  max_score: 100

translations:
  ja:
    title: "ã—ã¾ã£ãŸã€mainã§ä½œæ¥­ã—ã¦ãŸï¼"
    description: "3ã¤ã®ã‚³ãƒŸãƒƒãƒˆã‚’mainãƒ–ãƒ©ãƒ³ãƒã«ç›´æ¥ã—ã¦ã—ã¾ã£ãŸã“ã¨ã«æ°—ã¥ãã¾ã—ãŸã€‚ä½œæ¥­ã‚’å¤±ã‚ãšã«æ–°ã—ã„ãƒ–ãƒ©ãƒ³ãƒã«ç§»å‹•ã—ã¦ãã ã•ã„ã€‚"
    hints:
      - "ã¾ãšç¾åœ¨ã®ä½ç½®ã§æ–°ã—ã„ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ: `git branch feature/task-A`"
      - "æ¬¡ã«mainã‚’3ã‚³ãƒŸãƒƒãƒˆå‰ã«æˆ»ã™: `git reset --hard HEAD~3`"
      - "ã‚³ãƒŸãƒƒãƒˆã¯æ¶ˆãˆã¦ã„ã¾ã›ã‚“ - featureãƒ–ãƒ©ãƒ³ãƒã«æ®‹ã£ã¦ã„ã¾ã™ï¼"

summary: |
  ## ğŸ¯ Branch = Pointer
  
  | Concept | Explanation |
  |---------|-------------|
  | Branch | Just a lightweight pointer to a commit |
  | HEAD | Points to current branch/commit |
  | reset --hard | Moves HEAD and branch pointer, updates working tree |
  
  **Key insight:** Creating a branch before reset "saves" the commits!
